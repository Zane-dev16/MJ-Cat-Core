schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: params.yaml
      hash: md5
      md5: 0a05616871092257d1f3ddb6ec9c8f3d
      size: 43
    - path: src/data_ingestion.py
      hash: md5
      md5: 700abc469d50b81ecb79f78537ec7e43
      size: 1496
    params:
      params.yaml:
        s3_bucket: mj-cat-data
        s3_prefix: dataset
    outs:
    - path: data/dataset
      hash: md5
      md5: 2bb2fb069433abcfae371dd8c1f9c7be.dir
      size: 1667092928
      nfiles: 169
  split_dataset:
    cmd: python src/split_dataset.py
    deps:
    - path: data/dataset
      hash: md5
      md5: 2bb2fb069433abcfae371dd8c1f9c7be.dir
      size: 1667092928
      nfiles: 169
    - path: src/split_dataset.py
      hash: md5
      md5: 6408a7713e47bbefc54569adade95710
      size: 1664
    outs:
    - path: data/splits
      hash: md5
      md5: 8e475e5714c6b17962ca640afe626027.dir
      size: 1667086780
      nfiles: 168
  data_preprocessing:
    cmd: python src/data_preprocessing.py
    deps:
    - path: data/splits
      hash: md5
      md5: 8e475e5714c6b17962ca640afe626027.dir
      size: 1667086780
      nfiles: 168
    - path: src/data_preprocessing.py
      hash: md5
      md5: 7a7370e92ace7a4d5bbca1c763fdc1b4
      size: 3521
    outs:
    - path: data/prepared
      hash: md5
      md5: 763d9b2b845bedf5f0be646ad01e00d6.dir
      size: 7875768980
      nfiles: 8929
  data_embedding:
    cmd: python src/data_embedding.py
    deps:
    - path: data/prepared
      hash: md5
      md5: 763d9b2b845bedf5f0be646ad01e00d6.dir
      size: 7875768980
      nfiles: 8929
    - path: params.yaml
      hash: md5
      md5: 0a05616871092257d1f3ddb6ec9c8f3d
      size: 43
    - path: src/data_embedding.py
      hash: md5
      md5: d002bcaf79ea8b1a37e3ecc911865250
      size: 2053
    outs:
    - path: data/embeddings
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  extract_embeddings:
    cmd: python src/extract_embeddings.py
    deps:
    - path: data/prepared
      hash: md5
      md5: 763d9b2b845bedf5f0be646ad01e00d6.dir
      size: 7875768980
      nfiles: 8929
    - path: params.yaml
      hash: md5
      md5: 0a05616871092257d1f3ddb6ec9c8f3d
      size: 43
    - path: src/extract_embeddings.py
      hash: md5
      md5: 640393597134c37fdbc8c4ae03107232
      size: 3630
    outs:
    - path: bentoml_home/models/audio_preprocessor
      hash: md5
      md5: b296c246cb39ea79ba9b72575daaf90d.dir
      size: 2499
      nfiles: 3
    - path: bentoml_home/models/vggish_model
      hash: md5
      md5: 7d8e64fb2d3477ced57a6a38967e9377.dir
      size: 288728708
      nfiles: 6
    - path: data/embeddings
      hash: md5
      md5: c6e62a92fd371e760d5d0a76412f4c6d.dir
      size: 13787144
      nfiles: 6
  train_model:
    cmd: python src/train_model.py
    deps:
    - path: data/embeddings
      hash: md5
      md5: c6e62a92fd371e760d5d0a76412f4c6d.dir
      size: 13787144
      nfiles: 6
    - path: src/train_model.py
      hash: md5
      md5: 39f3e409ec193b92aa4e453a7d8332ba
      size: 2581
